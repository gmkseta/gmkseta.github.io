{"componentChunkName":"component---src-templates-post-jsx","path":"/gh-pages-cname/","result":{"data":{"site":{"siteMetadata":{"title":"Seongjun Kim Blog"}},"markdownRemark":{"id":"8dfb02e2-4517-5ee9-8a31-a3558811607e","excerpt":"새 블로그를  으로 배포하고 있다.  브랜치에 푸시가 되면 github action으로 빌드를 하고, gh-pages로 푸시를 한다. gh-pages으로 정적 페이지들이 올라가면 이를 블로그로 사용한다 ( ) 사용법은 대충 github action 만들고 세팅에서 사진처럼 설정하면 끝인데  문제 배포할 때 마다 Custom Domain 설정이 사라진다..…","html":"<p>새 블로그를 <code class=\"language-text\">gatsby-gh-pages-action</code> 으로 배포하고 있다.</p>\n<p><code class=\"language-text\">main</code> 브랜치에 푸시가 되면 github action으로 빌드를 하고, gh-pages로 푸시를 한다.</p>\n<p>gh-pages으로 정적 페이지들이 올라가면 이를 블로그로 사용한다 ( <code class=\"language-text\">gmkseta.github.io</code>)</p>\n<p>사용법은 대충 github action 만들고 세팅에서 사진처럼 설정하면 끝인데</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> CI\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> main\n    <span class=\"token key atrule\">paths-ignore</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"**/README.md\"</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">deploy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">submodules</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> enriikke/gatsby<span class=\"token punctuation\">-</span>gh<span class=\"token punctuation\">-</span>pages<span class=\"token punctuation\">-</span>action@v2\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">access-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.ACCESS_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">deploy-branch</span><span class=\"token punctuation\">:</span> gh<span class=\"token punctuation\">-</span>pages\n          <span class=\"token key atrule\">skip-publish</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/f11953d50d39795ec6ea5f78303975ff/1e052/2021-11-28-23-48-18.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 62.35294117647059%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACBElEQVQoz22TWXfaMBCF/dYQMF4ly7Ll3RjMYqAsTZPT9vT//6fbkQwkOenDd0aLdTV3xrJktUUz/ELZn7E5XCFUjVBkYHFu4LJAlFYIzZzGSUVrpRnzpDRz/f3UYQZrJgRsJeGoBE4aIygzg1/kBMVSRwUvT4gUPqGjlyWPNT12Mok5aVlOJSFPLdrXPdq3A/rfJ5QvB8TXM+T1BPnjgujYI1grIvs/fYZwm8MtE1ieIHURY+IHmAThGInn4CMhpiEzzDSMwWYcNid3PBqJBGYBh1Uvd9jsL0iLhUFmDdKyQ6Lnt6jRtdX7PG3gyg4OL6hmdJHLHvUzNeRU8OXuZLi8/kWzGrDYHPH95Y9Z02L1cqCmKLgshsMSyi6FHcSYepStxx9ocSurV1hThqtBH27BZG4QWU1dLEiIGiNyIzL1xS2rMbO7yMexVbRr7C9v2J1+UmYHskm28wYxCUq6QFUdmCKbSQc3KjBzP2f1JUM/Uqi6LcrFhg6v8GT7+DbzPvFETGyXoDgP8ey8M3UCk/VDMG9W6LZHg7ao7fqCfhFitKvgU9TrpgQUg9u+y1M4UYk5Uw/rlq6brl8/nKHtC1VRY3Zo+z1qalBPf8FgStGZMuh9Jgsj7tMLcWVLovm7oBPG5iPdBJdJshTQU7s9NzqY0cEqLclSZMqh9++Mln1j+275H3DFOZ5sY7JSAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2021 11 28 23 48 18' title='2021 11 28 23 48 18' src='/static/f11953d50d39795ec6ea5f78303975ff/ca1dc/2021-11-28-23-48-18.png' srcset='/static/f11953d50d39795ec6ea5f78303975ff/e7570/2021-11-28-23-48-18.png 170w,\n/static/f11953d50d39795ec6ea5f78303975ff/f46e7/2021-11-28-23-48-18.png 340w,\n/static/f11953d50d39795ec6ea5f78303975ff/ca1dc/2021-11-28-23-48-18.png 680w,\n/static/f11953d50d39795ec6ea5f78303975ff/1e052/2021-11-28-23-48-18.png 872w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span></p>\n<h2>문제</h2>\n<h3>배포할 때 마다 Custom Domain 설정이 사라진다...?</h3>\n<h2>원인을 찾아보자.</h2>\n<ul>\n<li>github docs를 찾아봤더니 다음과 같은 글이 나왔다.</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/14d298eb9d5c84cc06defa477ef25640/d2c78/2021-11-28-23-54-38.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 75.88235294117648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACc0lEQVQ4y1VUV5vaQAzkKckVDgwG3GgGN4oNuNByd7mUL///F000MjjJg9BK3tWORrO0eiMPi3gLP9rAnYfo2xM8vPTx1B3gsWM29nSzJpbvzR5dD/FsDNAaOFNs8xO2hxNWuxKTZYKOaaM7cGBK8e7A1XXHdNQbAsAYurqHZgwlb1pSbKhFWzwUbfZYJinC9Q7x9oBIbJUV9SXio00dM7/eVdgcjkgkDlYZgvSI6apCu28r4pZhTeHFJewghxMW4vdiB7hxBTsS8zcNWiIzhh5IU98aq2+bHjr2Es89qy6oCLc5QkERrveCsF4Hsk6yUuM4zesOpBMiTdJCc4zn4Uq4rTln2y1r7OPy/gtZcUZ1/cD57Sfy8xvKyzccX7/ruji/y/oH8tMb9sev6rkvKy8oZJ8zDXSQWpBDqfnYqb/zpDnhtOavVOMeIo5uPN+59UQdDcKRN1fZkBMWp2wG7gwm15IjJczT90ZjzfWtSfPtzm09ZQ5FAupv7Ed609iPMQvWcGeB5hh74rnv01MXn58NtS/t3j9r4y9C/kxFe7vqqnxlxUVbTvOzenI2WcRgJ850CUcusicLjWlDd64xlaAI+cNN5Iu8UYvkZykao1FzRMrD9mSpRd1ZKN3UHdkS8xtFrgX5dBZxiuvHbzVOlII+yRRPMllewPbdGzKiJSVJykFVEidKRdMy3yc3UCaH4yt25VWfICVUXb9rcU6XOqSfhxv4MkRO3Y+2ks8EoY92b1QjpH5IPN8zhU0ueZht8TALUvh847NwjbEgXN04Zmd3xP9xyKCWQy2dl76lQn0U4zQfXnr6r6I58czV+X5j95b/AGOdoDXk8vU5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2021 11 28 23 54 38' title='2021 11 28 23 54 38' src='/static/14d298eb9d5c84cc06defa477ef25640/ca1dc/2021-11-28-23-54-38.png' srcset='/static/14d298eb9d5c84cc06defa477ef25640/e7570/2021-11-28-23-54-38.png 170w,\n/static/14d298eb9d5c84cc06defa477ef25640/f46e7/2021-11-28-23-54-38.png 340w,\n/static/14d298eb9d5c84cc06defa477ef25640/ca1dc/2021-11-28-23-54-38.png 680w,\n/static/14d298eb9d5c84cc06defa477ef25640/d2c78/2021-11-28-23-54-38.png 812w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span></p>\n<ul>\n<li>대충 읽어보자면 CNAME file에 저장이 된다는데....</li>\n<li>한번 gh-pages 브랜치를 살펴보자..</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/ba102ac6a3a5bdfb11094f68ad58902c/ed9c8/2021-11-28-23-55-30.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 94.11764705882352%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADO0lEQVQ4y01UyXbjRgzkNWONTXEnu7nvkqg1tmfevElyTQ655P+/pVIAZY0PeC31A6qrCgAdL63glwvC+oiwuSBsb/BMj21ksNlG+OolPOP7GWEbW1TDAZGpEWYVsrKHnxTImwkvQQbHiyzivIcAB7aDb1qYeoQbpFrw7Cc8SyanvMvg+RYZ84K0RJI3GmnRPgg4Pn/YooEXZSyO8cLwyOKrFytYkBYKKACeyREuNbwuV3DJeXJDPb+8BHo6sa0xn95Q9XtkVa+sJNYXY5VXdju0wxH5fkb/3w35z1nvYksicU7JueaLCseUHcbDFc14RDefKaEjYM3kllaskZUDknJEVgywdkIQroxDUymIhKgRto5IktfqYU+WO02M1ZsWCb0RBVqYtnDDTO+8xCorsUZ8E6AnN1o9lIKSQPKChBRJ5zRogRie0GPXDNphy4Z5BJOuCnsB+Yg7wxJ5OymQXAh98UaDTCOyix4MjTLfcjLchMwL1kU564IHqCPJ/e4Mn9KlU8qwWhmaavjEcFSGph5Uat6MOjJS85mlIyNRtPNjBISh+LR62KmHsa3gpp12MmUTBdC3PaJy5jmsHn5Ilokvu1n/yGsCmBJImMmZ5LWCutm6PcJcAGVcxBLx/TNLRwAEsBkXjMv1wU5BWfyxDSugva9ajml3pFWn1d9g9X8jDAVQOiZj090TIjJSyfk6NnL3kFys5+vbuwKKz7IIKyAZumFKdrINE19vddVM1a/BBsidNGVrR5VqeRekOf79528uxEU/EvJx+JgSZ7PN6AU7Voxk1pN+wYSGRS1flo9ArbGJejbOIuCd5OwIJuq+PAf3wQ5XD9sxwev3Eb9/m3D7NmJeLJZrjeVSY3di4THXu3ZfUmKK063FuM/4eLVulinZ4fBXU6ZDjB9/jnj/MeD6XhHM4Pbe4PJa4nAxOJwz7M8ppqMhuDze4sgc8dVUEzzL+fUj/PYsU0LJT3fJZX/iiyeV68X0hZJFns+N8JJV8sYzvJN1M5zdDmXL3DBEmMq3M+UnkJ8vl9/Bbj7icH0jk1duSafNkE2Q7lv5X3Hd8knHpeCISVPOtwl//HXDcm4x7wvslxJVa/A/T3T3qm7jKKEAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2021 11 28 23 55 30' title='2021 11 28 23 55 30' src='/static/ba102ac6a3a5bdfb11094f68ad58902c/ca1dc/2021-11-28-23-55-30.png' srcset='/static/ba102ac6a3a5bdfb11094f68ad58902c/e7570/2021-11-28-23-55-30.png 170w,\n/static/ba102ac6a3a5bdfb11094f68ad58902c/f46e7/2021-11-28-23-55-30.png 340w,\n/static/ba102ac6a3a5bdfb11094f68ad58902c/ca1dc/2021-11-28-23-55-30.png 680w,\n/static/ba102ac6a3a5bdfb11094f68ad58902c/02d09/2021-11-28-23-55-30.png 1020w,\n/static/ba102ac6a3a5bdfb11094f68ad58902c/ed9c8/2021-11-28-23-55-30.png 1245w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span></p>\n<ul>\n<li>배포를 위해 빌드된 파일들이 들어가 있고, 잘 보니 CNAME 파일이 있다.</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/c6b4027bf15dc23ac24fb438da157ff3/4c530/2021-11-28-23-58-26.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 39.411764705882355%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABMklEQVQoz41SSW7DMAz0tVsSW7K12ZbkLY2TBm3//7cpycBA2kPQw4BayJkhpaL0I6r+DJ2u0MM3VP5EaRN2yuBpr/FyqPF8F3fKIs1nNG2Gsj1CWlCZFv14wl47FMp2UC4JKhuhQ5ZkLqx9xKEOqEOi6FE2Adr1MHTPZ9pFWTPhW2XwWjYoPB3k4SiXe5NQugGmm4TsjUg5kZU5mdcstK03+DiJWxYt2Oq8fsHnE0y6QMcVNi5w/UREXhxy4i3eUJnuF3gEefkgtwMR5gXj+5VUZrGvbIuSisqmFdXK/EVHHYwiaNoRVrrJaPPxRljRDEOaZQ475aQ9busRtla3uW41fFbUPskL9eOKjmIT2GWUmT5GQpxWavUCR92xU01cBX8HVuLXZhXe89D/g/svtdX9AMDQzKnTbVlOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2021 11 28 23 58 26' title='2021 11 28 23 58 26' src='/static/c6b4027bf15dc23ac24fb438da157ff3/ca1dc/2021-11-28-23-58-26.png' srcset='/static/c6b4027bf15dc23ac24fb438da157ff3/e7570/2021-11-28-23-58-26.png 170w,\n/static/c6b4027bf15dc23ac24fb438da157ff3/f46e7/2021-11-28-23-58-26.png 340w,\n/static/c6b4027bf15dc23ac24fb438da157ff3/ca1dc/2021-11-28-23-58-26.png 680w,\n/static/c6b4027bf15dc23ac24fb438da157ff3/02d09/2021-11-28-23-58-26.png 1020w,\n/static/c6b4027bf15dc23ac24fb438da157ff3/4c530/2021-11-28-23-58-26.png 1252w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span></p>\n<ul>\n<li>설정에서 Custom Domain을 추가하면 CNAME 파일이 생성되어 설정한 Custom Domain이 들어간다.</li>\n<li>하지만 gh-pages 브랜치는 배포용이어서 늘 강제푸시되는 브랜치이고....</li>\n<li>main 브랜치에서는 CNAME이 없어서 설정은 빠지고, 설정해도 gh-pages브랜치만 반영이 된 것</li>\n</ul>\n<h2>해결</h2>\n<ul>\n<li>main branch에 CNAME 파일 하나 추가 - 끗</li>\n</ul>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#https-errors\">https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#https-errors</a></li>\n</ul>","frontmatter":{"title":"gh-pages, custom domain(cname) 적용 안 될 때 (gatsby-gh-pages-action)","date":"November 27, 2021","update":"November 27, 2021","tags":["짧","팁","gatsby","github-action"],"series":null},"fields":{"slug":"/gh-pages-cname/","readingTime":{"minutes":0.85}}},"seriesList":{"edges":[{"node":{"id":"15b51d30-c078-53de-a25e-48039f097339","fields":{"slug":"/3-mount/"},"frontmatter":{"title":"Ubuntu 에서 (외장) 하드디스크 사용하기 "}}},{"node":{"id":"ae390cb5-0f32-5525-9ffc-204ebb1321a2","fields":{"slug":"/4-pgconnectbad/"},"frontmatter":{"title":"PG:ConnectionBad - could not connect to server: Connection refused"}}},{"node":{"id":"ecda0f77-0b85-5ca7-b7e1-02b52c277c4d","fields":{"slug":"/23-InfraStructureAsCode/"},"frontmatter":{"title":"Infrastructure as code"}}},{"node":{"id":"0106d6fa-95ca-57ce-b105-a61ccc1bfe48","fields":{"slug":"/26-difference-between-binary-semaphore-and-mutex/"},"frontmatter":{"title":"Binary Semaphore vs Mutex"}}},{"node":{"id":"9b992cd0-63e6-58c6-9932-8635b1c6296f","fields":{"slug":"/sudo-with-touch-id/"},"frontmatter":{"title":"터미널에서 비밀번호 말고 touch id로 sudo 쓰기"}}},{"node":{"id":"8dfb02e2-4517-5ee9-8a31-a3558811607e","fields":{"slug":"/gh-pages-cname/"},"frontmatter":{"title":"gh-pages, custom domain(cname) 적용 안 될 때 (gatsby-gh-pages-action)"}}},{"node":{"id":"471fd508-4593-5513-aaed-79bff70247a9","fields":{"slug":"/op-ssh/"},"frontmatter":{"title":"1password + ssh key password"}}},{"node":{"id":"e310aca0-ac3a-5c50-a84e-cacf6da37a52","fields":{"slug":"/https-and-ssl/"},"frontmatter":{"title":"HTTPS 와 SSL"}}},{"node":{"id":"dd1d3e00-4e08-55dc-9e58-b09bb83c5961","fields":{"slug":"/https-and-ssl-2/"},"frontmatter":{"title":"HTTPS 와 SSL - 2"}}},{"node":{"id":"75217705-7603-5d83-8492-2112ee48b14b","fields":{"slug":"/single-point-of-failure/"},"frontmatter":{"title":"단일 장애 지점(SPOF)이란? Single Point of Failure"}}},{"node":{"id":"1661f2df-49ed-52ff-a108-89ffa05b6889","fields":{"slug":"/rate-limit/"},"frontmatter":{"title":"처리율 제한 Rate Limit"}}}]},"previous":{"fields":{"slug":"/sudo-with-touch-id/"},"frontmatter":{"title":"터미널에서 비밀번호 말고 touch id로 sudo 쓰기"}},"next":{"fields":{"slug":"/week-47-2021-retrospective/"},"frontmatter":{"title":"47 주차 회고 [2021]"}}},"pageContext":{"id":"8dfb02e2-4517-5ee9-8a31-a3558811607e","series":null,"previousPostId":"9b992cd0-63e6-58c6-9932-8635b1c6296f","nextPostId":"0ec57a77-a458-5233-acaf-da57ff727451"}},"staticQueryHashes":[]}