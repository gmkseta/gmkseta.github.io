{"componentChunkName":"component---src-templates-post-jsx","path":"/sudo-with-touch-id/","result":{"data":{"site":{"siteMetadata":{"title":"Seongjun Kim Blog"}},"markdownRemark":{"id":"9b992cd0-63e6-58c6-9932-8635b1c6296f","excerpt":"요즘 애플워치로 맥 비밀번호( Touch ID )를 대신 하는 재미가 있다. 1password 비밀번호가 상당히 긴데 다 안 치고 애플워치( Touch ID )로 쓰니 쾌감 터미널에서도 sudo를 사용할 때 비밀번호를 touch id로 하는 법은 없을까 하다 검색해봤다. 선 1줄요약 Mac에서 Touch ID로 암호 대신 sudo 인증하기 원래는  같이 …","html":"<blockquote>\n<ul>\n<li>요즘 애플워치로 맥 비밀번호( Touch ID )를 대신 하는 재미가 있다.</li>\n<li>1password 비밀번호가 상당히 긴데 다 안 치고 애플워치( Touch ID )로 쓰니 쾌감</li>\n<li>터미널에서도 sudo를 사용할 때 비밀번호를 touch id로 하는 법은 없을까 하다 검색해봤다.</li>\n</ul>\n</blockquote>\n<p><strong>선 1줄요약</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">curl -sL https://gist.githubusercontent.com/RichardBronosky/31660eb4b0f0ba5e673b9bc3c9148a70/raw/touchid_sudo.sh | bash</code></pre></div>\n<h2>Mac에서 Touch ID로 암호 대신 sudo 인증하기</h2>\n<ul>\n<li>원래는 <code class=\"language-text\">sudo [command]</code> 같이 sudo 권한을 사용하려고 하면 비밀번호로 인증을 해야한다.</li>\n</ul>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 670px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/ccf600b6bd1da62cbbe2c0eb72c78e34/6bbca/2021-12-05-00-50-19.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 5.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAN0lEQVQI12NQcQ/8z2Fq81/c1vo/m77xfwYts/8M2lCsZYpgY8NAeUYd8//shtb/GYC0jJP3fwBu7xyDclSh9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2021 12 05 00 50 19' title='2021 12 05 00 50 19' src='/static/ccf600b6bd1da62cbbe2c0eb72c78e34/6bbca/2021-12-05-00-50-19.png' srcset='/static/ccf600b6bd1da62cbbe2c0eb72c78e34/e7570/2021-12-05-00-50-19.png 170w,\n/static/ccf600b6bd1da62cbbe2c0eb72c78e34/f46e7/2021-12-05-00-50-19.png 340w,\n/static/ccf600b6bd1da62cbbe2c0eb72c78e34/6bbca/2021-12-05-00-50-19.png 670w' sizes='(max-width: 670px) 100vw, 670px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span></p>\n<ul>\n<li>먼저 <code class=\"language-text\">/etc/pam.d/sudo</code> 파일을 수정해야하는데 읽기만 가능한 파일이라 변경해야한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">sudo su\ncd /etc/pam.d\nchmod 755 sudo\n# or chmod u+w /etc/pam.d/sudo</code></pre></div>\n<ul>\n<li><code class=\"language-text\">sudo</code> 파일의 맨 윗 줄에 <code class=\"language-text\">auth sufficient pam_tid.so</code> 을 추가한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">vi sudo</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># sudo file\nauth       sufficient     pam_tid.so #  &lt;&lt;&lt;&lt; 이 부분을 추가합니다.\nauth       sufficient     pam_smartcard.so\nauth       required       pam_opendirectory.so\naccount    required       pam_permit.so\npassword   required       pam_deny.so\nsession    required       pam_permit.so</code></pre></div>\n<ul>\n<li>다시 읽기만 가능한 권한으로 변경해줍니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">chmod 444 sudo\n# or chmod u-w sudo</code></pre></div>\n<p>끝!</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/98b782726aeea13a699b89ec31fb56a0/91652/2021-12-05-01-12-12.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 53.529411764705884%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVQoz62S32uSURyHj6sgRjdBrG3uh+nrz9ep89X3VZduqc1tKTKJMKONxRaOGlu1YEF1F7sd/QF1EQVFVGS2ftJ1N/UH+K8sns5e38BgBEIHHr7n4pznfD5wxK+9PQ5arVaLZ69e87LxjkZz16S5+5EnT58zkc4zHtPJFWbRjBQurx/FF8DjVxHff/zkxdsmjU9fTd58+Mz7L9+o377Dw3vbPNreYeH6Dda37lO/uUWxukB+vkqiUCY5UyaeL6Jop1FiaTwRA1FaWkX0KxxRItgcYwhHENuwjxNhg8cPdri1eJVUpUa+ukT2wiLG3HlCk3OoE2flnMUVyzAY1BkOJRnwRxG1zbuIoEFfJsXxpEGvfK1HjXMyZODQMtjDKU7J6dQmcUYzMs0UufIlSrUVihdX0KfnyVYuk5MMhROIytomYiTA4bCOLRhDBOIIX5Rj7hB2n8aAN0q/d7yNR+KO4NbSBBJZVIkzksJnTEnO0KdqsvLqhik8NJaUMh2h6m2pFIoRj8RtzQ7sLsSgs82QYu1dHN2vXKqvW0IZV1Y1pX/E/yJooe43a89emVZML68hRgP0mMKOhN1g3TGF5+obHQn/g7BwRX6bUfVvYTfSjvOmcGb52sHCbrGEvwGsGXGDr8vbpQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2021 12 05 01 12 12' title='2021 12 05 01 12 12' src='/static/98b782726aeea13a699b89ec31fb56a0/ca1dc/2021-12-05-01-12-12.png' srcset='/static/98b782726aeea13a699b89ec31fb56a0/e7570/2021-12-05-01-12-12.png 170w,\n/static/98b782726aeea13a699b89ec31fb56a0/f46e7/2021-12-05-01-12-12.png 340w,\n/static/98b782726aeea13a699b89ec31fb56a0/ca1dc/2021-12-05-01-12-12.png 680w,\n/static/98b782726aeea13a699b89ec31fb56a0/91652/2021-12-05-01-12-12.png 694w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span></p>\n<span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 368px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/4d74a5e861406d94592f46e51462a355/55493/2021-12-05-01-13-09.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 121.76470588235296%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrklEQVQ4y82UuYpCQRBFnyLu+/7cV9wwcEEDwcgNVFAjQTAwMhY/QecHRIxNRfwSf8fYOfpgYAZHHYaRqaApuu/te6u63hMEQTAYDFqtVngUSqXSarXqdDqTyWQ0GmUy2WW3Vqv1+/1SqfQdTcJls9nhcFitVhuNRqvVUigUlzMu40qLxXJfGXdgsIms3W4X/l/o9XrsUY5kkuQxR2oMLZnNZuPxeDqdTiaT0Wg0n88rlcoH4B55MBh4PJ5oNHo8HlerlVqtJu92u0+Re72e1+stl8vn8/l0OmUymXA43Ol0niK3221RFH0+32632263vEogEGg2m/fI0kEikTgcDuv1erlcvl1jsVhsNpv9fh+LxQDI5fJ7fcYzsn6/nxXNYDAoXkOj0dzm4A1QPB5HmTFi4JLJpNvtpnOpVIrTUCjkdDrZRJ/TT2Sz2QwONZfLZbPZHA5HJBIBhzgJTHLIwMAAeNC8X4XsGiQqlYrK0+k0ZedyOd6cnAK/mr8ZkGlEvV5nZfig5fN5iqeKH3hhyBkYWlAsFvEiVf7szIMuFAqQpRL4n7z8g/2zR3pRvANqbVH9dYSwrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='2021 12 05 01 13 09' title='2021 12 05 01 13 09' src='/static/4d74a5e861406d94592f46e51462a355/55493/2021-12-05-01-13-09.png' srcset='/static/4d74a5e861406d94592f46e51462a355/e7570/2021-12-05-01-13-09.png 170w,\n/static/4d74a5e861406d94592f46e51462a355/f46e7/2021-12-05-01-13-09.png 340w,\n/static/4d74a5e861406d94592f46e51462a355/55493/2021-12-05-01-13-09.png 368w' sizes='(max-width: 368px) 100vw, 368px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy'>\n  </a>\n    </span>\n<ul>\n<li>애플워치에서도 잘 보입니다</li>\n</ul>\n<h2>Reference</h2>\n<ul>\n<li><a href=\"https://apple.stackexchange.com/questions/259093/can-touch-id-for-the-mac-touch-bar-authenticate-sudo-users-and-admin-privileges/306324#306324\">https://apple.stackexchange.com/questions/259093/can-touch-id-for-the-mac-touch-bar-authenticate-sudo-users-and-admin-privileges/306324#306324</a></li>\n</ul>","frontmatter":{"title":"터미널에서 비밀번호 말고 touch id로 sudo 쓰기","date":"November 24, 2021","update":"November 24, 2021","tags":["짧","macos","terminal"],"series":null},"fields":{"slug":"/sudo-with-touch-id/","readingTime":{"minutes":0.845}}},"seriesList":{"edges":[{"node":{"id":"15b51d30-c078-53de-a25e-48039f097339","fields":{"slug":"/3-mount/"},"frontmatter":{"title":"Ubuntu 에서 (외장) 하드디스크 사용하기 "}}},{"node":{"id":"ae390cb5-0f32-5525-9ffc-204ebb1321a2","fields":{"slug":"/4-pgconnectbad/"},"frontmatter":{"title":"PG:ConnectionBad - could not connect to server: Connection refused"}}},{"node":{"id":"ecda0f77-0b85-5ca7-b7e1-02b52c277c4d","fields":{"slug":"/23-InfraStructureAsCode/"},"frontmatter":{"title":"Infrastructure as code"}}},{"node":{"id":"0106d6fa-95ca-57ce-b105-a61ccc1bfe48","fields":{"slug":"/26-difference-between-binary-semaphore-and-mutex/"},"frontmatter":{"title":"Binary Semaphore vs Mutex"}}},{"node":{"id":"9b992cd0-63e6-58c6-9932-8635b1c6296f","fields":{"slug":"/sudo-with-touch-id/"},"frontmatter":{"title":"터미널에서 비밀번호 말고 touch id로 sudo 쓰기"}}},{"node":{"id":"8dfb02e2-4517-5ee9-8a31-a3558811607e","fields":{"slug":"/gh-pages-cname/"},"frontmatter":{"title":"gh-pages, custom domain(cname) 적용 안 될 때 (gatsby-gh-pages-action)"}}},{"node":{"id":"471fd508-4593-5513-aaed-79bff70247a9","fields":{"slug":"/op-ssh/"},"frontmatter":{"title":"1password + ssh key password"}}},{"node":{"id":"e310aca0-ac3a-5c50-a84e-cacf6da37a52","fields":{"slug":"/https-and-ssl/"},"frontmatter":{"title":"HTTPS 와 SSL"}}},{"node":{"id":"dd1d3e00-4e08-55dc-9e58-b09bb83c5961","fields":{"slug":"/https-and-ssl-2/"},"frontmatter":{"title":"HTTPS 와 SSL - 2"}}},{"node":{"id":"75217705-7603-5d83-8492-2112ee48b14b","fields":{"slug":"/single-point-of-failure/"},"frontmatter":{"title":"단일 장애 지점(SPOF)이란? Single Point of Failure"}}},{"node":{"id":"1661f2df-49ed-52ff-a108-89ffa05b6889","fields":{"slug":"/rate-limit/"},"frontmatter":{"title":"처리율 제한 Rate Limit"}}}]},"previous":{"fields":{"slug":"/26-difference-between-binary-semaphore-and-mutex/"},"frontmatter":{"title":"Binary Semaphore vs Mutex"}},"next":{"fields":{"slug":"/gh-pages-cname/"},"frontmatter":{"title":"gh-pages, custom domain(cname) 적용 안 될 때 (gatsby-gh-pages-action)"}}},"pageContext":{"id":"9b992cd0-63e6-58c6-9932-8635b1c6296f","series":null,"previousPostId":"0106d6fa-95ca-57ce-b105-a61ccc1bfe48","nextPostId":"8dfb02e2-4517-5ee9-8a31-a3558811607e"}},"staticQueryHashes":[]}